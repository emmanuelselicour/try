<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Bet-Adviser WebApp</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <style>
    body{font-family:Arial,Helvetica,sans-serif;background:#111;color:#eee;margin:0;padding:1rem}
    h1,h2{color:#00ff90}
    .card{background:#222;border-radius:8px;padding:1rem;margin:.5rem 0}
    button{background:#00ff90;border:none;padding:.7rem 1.2rem;border-radius:4px;font-weight:bold}
    .about{margin-top:2rem;font-size:.9rem;color:#aaa}
  </style>
</head>
<body>
  <h1>üìä Live Matches</h1>
  <div id="list">loading...</div>

  <div class="about" id="about">
    <h2>‚ÑπÔ∏è About</h2>
    <p>Bot developed by <strong>True-Manno</strong><br>
       Data refreshed every 5 min via The-Odds-API.</p>
  </div>

  <script>
    async function load(){
      const res = await fetch('/api/live');
      const matches = await res.json();
      const box = document.getElementById('list');
      if(!matches.length) return box.innerHTML='<p>No match available now.</p>';
      box.innerHTML = matches.map(m=>`
        <div class="card">
          <strong>${m.home}</strong> vs <strong>${m.away}</strong><br>
          Kick-off: ${new Date(m.kickoff).toLocaleString()}<br>
          Odds: 1 ${m.odds['1']} | X ${m.odds['X']} | 2 ${m.odds['2']}
          <br><button onclick="getAdvice('${m.home}','${m.away}',${m.odds['1']},${m.odds['X']},${m.odds['2']})">Get advice</button>
        </div>`).join('');
    }
    async function getAdvice(h,a,o1,oX,o2){
      const r = await fetch('/advise',{
        method:'POST',
        headers:{'Content-Type':'application/json'},
        body:JSON.stringify({home:h,away:a,odd1:o1,oddX:oX,odd2:o2})
      });
      const j=await r.json();
      alert(JSON.stringify(j.advice,null,2));
    }
    load();
    // auto-refresh every 2 min
    setInterval(load,120000);
  </script>
</body>
</html>
